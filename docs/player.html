<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Unity Web Player | My project</title>
  <link rel="shortcut icon" href="TemplateData/favicon.ico">
  <link rel="stylesheet" href="TemplateData/style.css">
  <style>
    html,body{height:100%;margin:0;overflow:hidden;background:#000;}
    #stage{position:fixed;inset:0;display:grid;place-items:center;}
    .fit16x9{width:min(100dvw,calc(100dvh*16/9));height:min(100dvh,calc(100dvw*9/16));}
    #unity-canvas{width:100% !important;height:100% !important;display:block;background:#231f20;}

    /* Loader overlay */
    #loader{position:fixed;inset:0;display:grid;place-items:center;background:#0b0b0b;z-index:9999;}
    .card{width:min(90vw,360px);padding:16px 18px;text-align:center;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#e6e6e6;}
    .bar{height:10px;background:#1e1e1e;border-radius:999px;overflow:hidden}
    .fill{height:100%;width:0%}
    .t{margin:0 0 10px 0;font-size:14px;opacity:.9}
    .p{margin-top:8px;font-size:12px;opacity:.8}
  </style>
</head>
<body>
  <div id="stage">
    <div class="fit16x9">
      <!-- no fixed width/height -->
      <canvas id="unity-canvas" tabindex="-1"></canvas>
    </div>
  </div>

  <!-- independent loader (does not rely on Unity CSS) -->
  <div id="loader">
    <div class="card">
      <p class="t">Loadingâ€¦</p>
      <div class="bar"><div class="fill" id="fill" style="background:linear-gradient(90deg,#4dc0ff,#2eaadc)"></div></div>
      <div class="p" id="pct">0%</div>
    </div>
  </div>

  <script>
    // unity config
    const buildUrl  = "Build";
    const loaderUrl = buildUrl + "/Medi.loader.js";
    const config = {
      arguments: [],
      dataUrl:      buildUrl + "/Medi.data",
      frameworkUrl: buildUrl + "/Medi.framework.js",
      codeUrl:      buildUrl + "/Medi.wasm",
      streamingAssetsUrl: "StreamingAssets",
      companyName: "DefaultCompany",
      productName: "My project",
      productVersion: "0.1.0"
    };

    // progress UI
    const canvas = document.getElementById("unity-canvas");
    const loader = document.getElementById("loader");
    const fill = document.getElementById("fill");
    const pct  = document.getElementById("pct");

    // mobile meta
    if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
      const m=document.createElement("meta");
      m.name="viewport";
      m.content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes";
      document.head.appendChild(m);
      // Optional: lower render res on phones
      // config.devicePixelRatio = 1;
    }

    // load Unity
    const s=document.createElement("script");
    s.src=loaderUrl;
    s.onload=() => {
      createUnityInstance(canvas, config, (progress)=>{
        const p=Math.round(progress*100);
        fill.style.width=p+"%";
        pct.textContent=p+"%";
      }).then(()=>{
        loader.style.display="none";
      }).catch((e)=>{ loader.style.display="none"; alert(e); });
    };
    document.body.appendChild(s);
  </script>
</body>
</html>
